# HTTP协议
## HTTP请求的准备
&emsp;&emsp;当访问某个域名时，首先会根据DNS协议，得到对应的IP地址。由于HTTP协议是基于TCP协议的，接下来，就要先建立TCP连接。  
&emsp;&emsp;目前使用的HTTP协议大部分都是1.1，在1.1的协议里，默认开启了Keep-Alive，这样建立的TCP连接，可以在多次请求中复用。  

## HTTP请求的构建
&emsp;&emsp;建立了TCP连接后，浏览器就要发送HTTP请求，请求格式如下：  
![](asserts/HTTP请求格式.jpeg)  
&emsp;&emsp;HTTP请求报文分为三大部分：**请求行、首部、正文实体**。  

## HTTP请求的发送
&emsp;&emsp;HTTP是基于TCP协议的，它使用面向连接的方式发送请求，通过stream二进制流的方式传给对方。到了TCP层，它会把二进制流变成一个个报文段发送给服务器。  
&emsp;&emsp;在发送每个报文段的时候，都需要对方有一个回应的ACK，保证报文可靠到达对方。如果没有回应，TCP这一层回重传，直到可以到达。同一个包可能被重传很多次，但是HTTP层不知道这一点，因为是TCP层在埋头苦干。  
&emsp;&emsp;TCP层发送每一个报文的时候，会把源IP和目的IP放入IP头部交给IP层，IP层会查看目标IP跟自己是否在同一个网段，如果是，就发送ARP请求目标IP地址的MAC地址，然后将源MAC和目标MAC放入MAC头部，发送出去即可；如果不在同一个网段，就需要发送到网关，需要通过ARP协议请求网关的MAC地址，然后将源MAC和网关的MAC放入MAC头，发送出去。  
&emsp;&emsp;网关根据路由协议找到下一跳路由器，将包发给下一跳路由器，最终到达目标所在局域网，目标机器收到这个包，发现IP地址符合，根据IP头中的协议项，直到自己的上一层是TCP协议，于是解析TCP的头，里面有序列号，需要看一看这个序列包是不是想要的，如果是就放入缓存中然后返回一个ACK，不是就丢弃。  
&emsp;&emsp;TCP头里还有端口号，根据端口号找到对应的应用程序，把包发给这个应用程序处理。  

## HTTP返回的构建
![](asserts/HTTP返回报文.jpeg)  
&emsp;&emsp;HTTP响应状态码：1xx是信息响应，2xx表示成功响应，3xx表示重定向，4xx表示客户端错误，5xx表示服务器错误。  

## HTTP 2.0

# HTTPS协议

# 流媒体协议

# P2P协议
